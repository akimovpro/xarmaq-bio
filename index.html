rY) * -20;
        const rotateY = (deltaX / centerX) * 20;
        card.style.transform = rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1);
      });
      card.addEventListener('mouseleave', () => {
        card.style.transform = restingTransform;
      });

      // 3D-эффект для мобильных (touchmove)
      card.addEventListener('touchmove', (e) => {
        if (e.touches.length === 1) {
          e.preventDefault();
          const rect = card.getBoundingClientRect();
          const touch = e.touches[0];
          const x = touch.clientX - rect.left;
          const y = touch.clientY - rect.top;
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          const deltaX = x - centerX;
          const deltaY = y - centerY;
          const rotateX = (deltaY / centerY) * -20;
          const rotateY = (deltaX / centerX) * 20;
          card.style.transform = rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1);
        }
      }, { passive: false });
      card.addEventListener('touchend', () => {
        card.style.transform = restingTransform;
      });
      card.addEventListener('touchcancel', () => {
        card.style.transform = restingTransform;
      });

      card.addEventListener('touchstart', () => {
        card.classList.add('active');
        if (navigator.vibrate) navigator.vibrate(50);
      });
      card.addEventListener('touchend', () => {
        card.classList.remove('active');
      });
      card.addEventListener('touchcancel', () => {
        card.classList.remove('active');
      });

      // 3D-эффект при наклоне телефона (гироскоп)
      function handleOrientation(event) {
        let beta = event.beta;
        let gamma = event.gamma;
        if (beta > 20) beta = 20;
        if (beta < -20) beta = -20;
        if (gamma > 20) gamma = 20;
        if (gamma < -20) gamma = -20;
        const rotateX = -beta;
        const rotateY = gamma;
        card.style.transform = rotateX(${rotateX}deg) rotateY(${rotateY}deg);
      }

      function requestDeviceOrientation() {
        if (typeof DeviceOrientationEvent.requestPermission === 'function') {
          DeviceOrientationEvent.requestPermission()
            .then((response) => {
              if (response === 'granted') {
                window.addEventListener('deviceorientation', handleOrientation);
              } else {
                console.warn('Доступ к гироскопу отклонён.');
              }
            })
            .catch(console.error);
        } else {
          window.addEventListener('deviceorientation', handleOrientation);
        }
      }

      requestDeviceOrientation();
    });
  </script>
</body>
</html>
